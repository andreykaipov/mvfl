
Integer : /[0-9]+/
        ;

Float : /[0-9]+\.[0-9]+/
      ;

Number : <Float>
       | <Integer>
       ;

InfixExpression : <Factor> ( ('+'|'-') <Factor> )*
                ;

Factor : <Term> ( ('*'|'/'|'%') <Term> )*
       ;

Term : <Base> ('^' <Term>)?
     | ('+'|'-') <Term>
     ;

Base : <Number>
     | '(' <Expression> ')'
     ;

Symbol : "add" | "sub" | "mul" | "div" | "min" | "max" | "pow"
               ;

PrefixExpression : <Symbol> <Term>+
                 ;

Expression : <InfixExpression>
           | <Symbol>
           | <Sexpr>
           ;

Sexpr : '(' <Expression>* ')'
      ;

Mvfl : /^/ <Expression>* /$/ ;


